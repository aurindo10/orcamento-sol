generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

model User {
    id              String    @id @default(cuid())
    email           String    @unique
    firstName       String
    lastName        String
    createdAt       DateTime  @default(now())
    productsCreated Product[] @relation("UserProductsCreated")
    clientsCreated  Client[]
}

model Product {
    id               String   @id @default(cuid())
    name             String
    price            Float
    discount         Float?
    power            Float
    roofType         String
    generation       String
    panelBrand       String
    inverterBrand    String
    whoCreatedId     String?
    whoCreated       User?    @relation(name: "UserProductsCreated", fields: [whoCreatedId], references: [id])
    createdAt        DateTime @default(now())
    ClientInterested Client[]
}

model Client {
    id                  String   @id @default(cuid())
    firstName           String
    phone               String
    email               String
    createdAt           DateTime @default(now())
    InterestedProductId String?
    InterestedProduct   Product? @relation(fields: [InterestedProductId], references: [id])
    whoCreatedId        String?
    whoCreated          User?    @relation(fields: [whoCreatedId], references: [id])
}
